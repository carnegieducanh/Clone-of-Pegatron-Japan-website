<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Pegatron Japan Inc</title>
        <!-- Favicon -->

        <!-- Font -->
        <link rel="stylesheet" href="./assets/fonts/stylesheet.css" />

        <!-- Styles -->
        <link rel="stylesheet" href="./assets/css/main.css" />

        <!-- Scripts -->
        <script src="./assets/js/scripts.js"></script>
    </head>
    <body>
        <!-- Header -->
        <header id="header" class="header"></header>
        <script>
            load("#header", "./templates/header.html");
        </script>

        <!-- Main -->
        <main class="page-content">
            <!-- Slide Show -->
            <div class="swiper-slide">
                <div class="swiper-slide__list">
                    <div class="swiper-slide__list-item">
                        <img
                            src="./assets/img/swiper-slide/swiper-slide 1.jpg"
                            alt=""
                        />
                    </div>
                    <div class="swiper-slide__list-item">
                        <img
                            src="./assets/img/swiper-slide/swiper-slide 2.jpg"
                            alt=""
                        />
                    </div>
                    <div class="swiper-slide__list-item">
                        <img
                            src="./assets/img/swiper-slide/swiper-slide 3.jpg"
                            alt=""
                        />
                    </div>
                </div>
                <div class="swiper-slide__buttons">
                    <button id="prev"><</button>
                    <button id="next">></button>
                </div>
                <ul class="swiper-slide__dots">
                    <li class="active"></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
            <script>
                let slider = document.querySelector(
                    ".swiper-slide .swiper-slide__list"
                );
                let items = document.querySelectorAll(
                    ".swiper-slide .swiper-slide__list .swiper-slide__list-item"
                );
                let next = document.getElementById("next");
                let prev = document.getElementById("prev");
                let dots = document.querySelectorAll(
                    ".swiper-slide .swiper-slide__dots li"
                );

                let lengthItems = items.length - 1;
                let active = 0;
                next.onclick = function () {
                    active = active + 1 <= lengthItems ? active + 1 : 0;
                    reloadSlider();
                };
                prev.onclick = function () {
                    active = active - 1 >= 0 ? active - 1 : lengthItems;
                    reloadSlider();
                };
                let refreshInterval = setInterval(() => {
                    next.click();
                }, 3000);
                function reloadSlider() {
                    slider.style.left = -items[active].offsetLeft + "px";
                    //
                    let last_active_dot = document.querySelector(
                        ".swiper-slide .swiper-slide__dots li.active"
                    );
                    last_active_dot.classList.remove("active");
                    dots[active].classList.add("active");

                    clearInterval(refreshInterval);
                    refreshInterval = setInterval(() => {
                        next.click();
                    }, 3000);
                }

                dots.forEach((li, key) => {
                    li.addEventListener("click", () => {
                        active = key;
                        reloadSlider();
                    });
                });
                window.onresize = function (event) {
                    reloadSlider();
                };
            </script>
        </main>

        <!-- Footer -->
        <footer id="footer" class="footer"></footer>
        <script>
            load("#footer", "./templates/footer.html");
        </script>
    </body>
</html>
